import{r as e}from"./phaser-CX4W8lYH.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t=e();class s extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("tiles","assets/tilesets/code-land.png"),this.load.atlas("player","assets/spritesheets/player.png","assets/spritesheets/player.json"),this.load.tilemapTiledJSON("map","assets/tilemaps/player-home.json"),this.load.audio("music-opening","assets/audio/opening.wav")}create(){this.scene.start("Main")}}class i extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"player"),e.physics.add.existing(this),e.add.existing(this),this.setCollideWorldBounds(!0),this.initAnimations(e)}initAnimations(e){[{key:"walk-down",start:0,end:3},{key:"walk-up",start:4,end:7},{key:"walk-left",start:8,end:11},{key:"walk-right",start:12,end:15}].forEach((t=>{e.anims.create({key:t.key,frames:e.anims.generateFrameNames("player",{prefix:"player_",start:t.start,end:t.end}),frameRate:5,repeat:-1})}))}update(e,t){var s,i,a,n;this.setVelocity(0);const r=(null==(s=e.left)?void 0:s.isDown)?"left":(null==(i=e.right)?void 0:i.isDown)?"right":(null==(a=e.up)?void 0:a.isDown)?"up":(null==(n=e.down)?void 0:n.isDown)?"down":null;if(r){const e="left"===r||"right"===r?{x:"left"===r?-t:t,y:0}:{x:0,y:"up"===r?-t:t};this.setVelocity(e.x,e.y),this.anims.play(`walk-${r}`,!0)}this.body&&0===this.body.velocity.length()&&this.anims.stop(),this.body&&this.body.velocity.normalize().scale(t)}}class a{constructor(e){this.scene=e}create(e){const t=this.scene.add.graphics();t.fillStyle(3355443,.9),t.fillRoundedRect(0,this.scene.cameras.main.height-.2*this.scene.cameras.main.height,this.scene.cameras.main.width,.2*this.scene.cameras.main.height,20),t.lineStyle(2,16777215,1),t.strokeRoundedRect(0,this.scene.cameras.main.height-.2*this.scene.cameras.main.height,this.scene.cameras.main.width,.2*this.scene.cameras.main.height,20),t.setDepth(20);const s=this.scene.add.graphics();s.lineStyle(2,16777215,1),s.strokeRoundedRect(10,this.scene.cameras.main.height-.2*this.scene.cameras.main.height+10,this.scene.cameras.main.width-20,.2*this.scene.cameras.main.height-20,15),s.setDepth(20),this.textBox=this.scene.add.text(30,this.scene.cameras.main.height-.2*this.scene.cameras.main.height+30,"",{fontSize:"48px",color:"#ffffff",wordWrap:{width:this.scene.cameras.main.width-60},padding:{left:20,right:20,top:20,bottom:20},backgroundColor:"#444444"}),this.textBox.setDepth(20);const i=this.scene.add.text(this.scene.cameras.main.width-180,this.scene.cameras.main.height-.2*this.scene.cameras.main.height+.2*this.scene.cameras.main.height-100,"OK",{fontSize:"48px",color:"#ffffff",backgroundColor:"#555555",padding:{left:20,right:20,top:10,bottom:10}}).setInteractive().on("pointerdown",(()=>{this.textBox.setText(""),t.clear(),t.destroy(),s.clear(),s.destroy(),i.destroy(),this.textBox.destroy()}));i.setDepth(20);let a=0;this.scene.time.addEvent({delay:50,callback:()=>{a<e.length&&(this.textBox.text+=e[a],a++)},repeat:e.length-1})}}class n extends t.Scene{constructor(){super("Main")}create(){this.initMap(),this.initPlayer(),this.initKeyboard(),this.sound.play("music-opening",{loop:!0,volume:.5}),this.textBox=new a(this),this.textBox.create("Hello, Player!")}initMap(){const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("code-land","tiles");e.createLayer("Below Player",t,0,0),this.worldLayer=e.createLayer("World",t,0,0);const s=e.createLayer("Above Player",t,0,0);null==s||s.setDepth(10),this.worldLayer.setCollisionByProperty({collides:!0}),this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.physics.world.setBounds(0,0,e.widthInPixels,e.heightInPixels)}initPlayer(){this.player=new i(this,800,780),this.cameras.main.startFollow(this.player,!0,.09,.09),this.physics.add.collider(this.player,this.worldLayer)}initKeyboard(){var e;this.cursors=null==(e=this.input.keyboard)?void 0:e.createCursorKeys(),this.events.on("update",this.update,this)}update(){this.player&&this.cursors&&this.player.update(this.cursors,300)}}const r=[s,n],o={title:"Cozy Copilot",version:"1.0.0",width:1.5*window.innerWidth,height:1.5*window.innerHeight,type:Phaser.AUTO,physics:{default:"arcade",arcade:{debug:!1}},disableContextMenu:!0,scale:{mode:Phaser.Scale.FIT,parent:"app",autoCenter:Phaser.Scale.CENTER_BOTH},scene:[...r]};Phaser.Scene,new t.Game(o);
