var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s,g as i}from"./phaser-CKN4kaq3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a=s();const o=i(a);class r extends a.Scene{constructor(){super("Boot")}preload(){this.load.setPath("assets"),this.load.image("tiles","tilesets/code-land.png"),this.load.tilemapTiledJSON("map","tilemaps/player-home.json"),this.load.atlas("player","spritesheets/player.png","spritesheets/player.json"),this.load.audio("music-opening","audio/opening.wav")}create(){this.scene.start("MainMenu")}}class n extends o.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"player"),e.physics.add.existing(this),e.add.existing(this),this.setCollideWorldBounds(!0),this.initAnimations(e)}initAnimations(e){[{key:"walk-down",start:0,end:3},{key:"walk-up",start:4,end:7},{key:"walk-left",start:8,end:11},{key:"walk-right",start:12,end:15}].forEach((t=>{e.anims.create({key:t.key,frames:e.anims.generateFrameNames("player",{prefix:"player_",start:t.start,end:t.end}),frameRate:5,repeat:-1})}))}update(e,t){var s,i,a,o;this.setVelocity(0);const r=(null==(s=e.left)?void 0:s.isDown)?"left":(null==(i=e.right)?void 0:i.isDown)?"right":(null==(a=e.up)?void 0:a.isDown)?"up":(null==(o=e.down)?void 0:o.isDown)?"down":null;if(r){const e="left"===r||"right"===r?{x:"left"===r?-t:t,y:0}:{x:0,y:"up"===r?-t:t};this.setVelocity(e.x,e.y),this.anims.play(`walk-${r}`,!0)}this.body&&0===this.body.velocity.length()&&this.anims.stop(),this.body&&this.body.velocity.normalize().scale(t)}}class l{constructor(e){t(this,"scene"),t(this,"textBox"),this.scene=e}create(e){const t=this.scene.cameras.main,s=.98*t.width,i=.28*t.height,a=t.scrollX+(t.width-s)/2,o=t.scrollY+t.height-i-10,r=this.scene.add.graphics();r.fillStyle(3355443,.9),r.fillRoundedRect(a,o,s,i,20),r.lineStyle(2,16777215,1),r.strokeRoundedRect(a,o,s,i,20),r.setDepth(20);const n=this.scene.add.graphics();n.lineStyle(2,16777215,1),n.strokeRoundedRect(a+10,o+10,s-20,i-20,15),n.setDepth(20),this.textBox=this.scene.add.text(a+30,o+30,"",{fontSize:"32px",color:"#ffffff",wordWrap:{width:s-60},padding:{left:20,right:20,top:20,bottom:20}}),this.textBox.setDepth(20);let l,h=0,d=!1;const c=t=>{l?(l.setText(t),l.setVisible(!0)):(l=this.scene.add.text(a+s-120,o+i-100,t,{fontSize:"28px",color:"#ffffff",backgroundColor:"#555555",padding:{left:20,right:20,top:10,bottom:10}}).setInteractive().on("pointerdown",(()=>{d?(d=!1,this.textBox.setText(""),null==l||l.setVisible(!1),this.scene.time.addEvent({delay:50,callback:p,repeat:e.length-h-1})):h>=e.length&&(this.textBox.setText(""),r.clear(),r.destroy(),n.clear(),n.destroy(),null==l||l.destroy(),this.textBox.destroy())})),l.setDepth(20))},p=()=>{h<e.length&&!d&&(this.textBox.text+=e[h],h++,this.textBox.height>i-60?(d=!0,c("â†“")):h>=e.length&&c("OK"))};this.scene.time.addEvent({delay:50,callback:p,repeat:e.length-1})}}class h extends a.Scene{constructor(){super("Game"),t(this,"cursors"),t(this,"player"),t(this,"worldLayer"),t(this,"textBox"),t(this,"debugText")}create(){this.initMap(),this.initPlayer(),this.initKeyboard(),this.sound.play("music-opening",{loop:!0,volume:.5}),this.textBox=new l(this),this.textBox.create('ðŸš¨ SYSTEM ALERT! ðŸš¨\n"Dear Debugger,\nThe Land of Code is in danger! A glitch is causing the codelets to run amok. To help them recover, you must seek out the lost Debugging Companions and restore order before it is too late!"'),this.events.on("update",(()=>this.update()))}initMap(){const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("code-land","tiles");e.createLayer("Below Player",t,0,0),this.worldLayer=e.createLayer("World",t,0,0);const s=e.createLayer("Above Player",t,0,0);null==s||s.setDepth(10),this.worldLayer.setCollisionByProperty({collides:!0}),this.physics.world.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels)}initPlayer(){this.player=new n(this,865,780),this.physics.add.collider(this.player,this.worldLayer),this.cameras.main.startFollow(this.player,!0,.09,.09)}initKeyboard(){this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys())}update(){this.player&&this.cursors&&this.player.update(this.cursors,300)}}class d extends a.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"land"),t(this,"logo"),t(this,"title")}preload(){this.load.image("menu","assets/main-menu.png")}create(){this.background=this.add.image(0,0,"menu").setOrigin(0,0),this.background.displayWidth=this.sys.canvas.width,this.background.displayHeight=this.sys.canvas.height,this.logo=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/3,"Cozy Copilot",{fontFamily:"Arial Black",fontSize:50,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.title=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/2+50,"Start Game",{fontFamily:"Arial Black",fontSize:30,color:"#ffcc99",stroke:"#000000",strokeThickness:5,align:"center"}).setOrigin(.5),this.title.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.startGame()))}startGame(){this.scene.start("Game")}}const c=[r,h,d],p={title:"Cozy Copilot",version:"1.0.0",width:1024,height:768,type:o.AUTO,physics:{default:"arcade",arcade:{debug:!1}},disableContextMenu:!0,scale:{parent:"app",mode:o.Scale.FIT,autoCenter:o.Scale.CENTER_BOTH,min:{width:800,height:600},max:{width:1600,height:1200},zoom:.5},scene:[...c]};new a.Game(p);
