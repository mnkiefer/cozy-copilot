var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{p as s}from"./phaser-nUMyL2sp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("clouds","assets/clouds.png")}create(){this.scene.start("Preloader")}}class i extends Phaser.Physics.Arcade.Sprite{constructor(e,s,a){super(e,s,a,"player",0),t(this,"direction"),this.direction="down",e.add.existing(this),e.physics.add.existing(this),e.anims.create({key:"walk_down",frames:e.anims.generateFrameNumbers("player",{start:0,end:3}),frameRate:5,repeat:-1}),e.anims.create({key:"walk_up",frames:e.anims.generateFrameNumbers("player",{start:4,end:7}),frameRate:5,repeat:-1}),e.anims.create({key:"walk_left",frames:e.anims.generateFrameNumbers("player",{start:8,end:11}),frameRate:5,repeat:-1}),e.anims.create({key:"walk_right",frames:e.anims.generateFrameNumbers("player",{start:12,end:15}),frameRate:5,repeat:-1})}}class r extends Phaser.Physics.Arcade.Sprite{constructor(e,s,a){super(e,s,a,"copilot",0),t(this,"direction"),this.direction="down",e.add.existing(this),e.physics.add.existing(this),e.anims.create({key:"copilot_walk_down",frames:e.anims.generateFrameNumbers("copilot",{start:0,end:3}),frameRate:3,repeat:-1}),e.anims.create({key:"copilot_walk_up",frames:e.anims.generateFrameNumbers("copilot",{start:4,end:7}),frameRate:3,repeat:-1}),e.anims.create({key:"copilot_walk_left",frames:e.anims.generateFrameNumbers("copilot",{start:8,end:11}),frameRate:3,repeat:-1}),e.anims.create({key:"copilot_walk_right",frames:e.anims.generateFrameNumbers("copilot",{start:12,end:15}),frameRate:3,repeat:-1})}}class o extends s.Scene{constructor(){super("Game"),t(this,"cursors"),t(this,"player"),t(this,"copilot")}preload(){this.loadAssets()}create(){!function(e){const t=e.sys.canvas.width+64,s=e.sys.canvas.height+128;for(let a=0;a<=t;a+=64)for(let t=0;t<=s;t+=128)e.add.sprite(a,t,"grass"),Math.random()>.9&&e.add.sprite(a,t,"bush").setDepth(t),Math.random()>.9&&e.add.sprite(a,t,"flowers").setDepth(t)}(this),this.player=new i(this,300,300),this.copilot=new r(this,350,300),this.cursors=this.input.keyboard.createCursorKeys(),this.setupCollisions(),this.player.setDepth(this.player.y),this.copilot.setDepth(this.copilot.y)}update(){var e,t;e=this.player,(t=this.cursors).left.isDown?(e.setVelocityX(-160),e.anims.play("walk_left",!0),e.direction="left"):t.right.isDown?(e.setVelocityX(160),e.anims.play("walk_right",!0),e.direction="right"):t.up.isDown?(e.setVelocityY(-160),e.anims.play("walk_up",!0),e.direction="up"):t.down.isDown?(e.setVelocityY(160),e.anims.play("walk_down",!0),e.direction="down"):(e.setVelocity(0),e.anims.stop()),function(e,t){const s=50;let a=e.x,i=e.y;"left"===e.direction?a+=s:"right"===e.direction?a-=s:"up"===e.direction?i+=s:"down"===e.direction&&(i-=s);const r=Phaser.Math.Distance.Between(t.x,t.y,a,i);if(r>s){const e=Phaser.Math.Angle.Between(t.x,t.y,a,i),o=Math.cos(e)*(r-s)*.5,n=Math.sin(e)*(r-s)*.5;t.body&&t.setVelocity(.9*t.body.velocity.x+o,.9*t.body.velocity.y+n)}else t.setVelocity(0);if(t.body){const e=new Phaser.Math.Vector2(t.body.velocity.x,t.body.velocity.y);e.length()>10?Math.abs(e.x)>Math.abs(e.y)?e.x>0?t.anims.play("copilot_walk_right",!0):e.x<0&&t.anims.play("copilot_walk_left",!0):e.y>0?t.anims.play("copilot_walk_down",!0):e.y<0&&t.anims.play("copilot_walk_up",!0):0===e.length()&&t.anims.stop()}}(this.player,this.copilot),this.player.setDepth(this.player.y),this.copilot.setDepth(this.copilot.y)}loadAssets(){this.load.spritesheet("player","assets/player.png",{frameWidth:64,frameHeight:80,startFrame:0,endFrame:15}),this.load.spritesheet("water","assets/spritesheet.png",{frameWidth:64,frameHeight:128,startFrame:12,endFrame:20}),this.load.spritesheet("grass","assets/spritesheet.png",{frameWidth:64,frameHeight:128,startFrame:21,endFrame:22}),this.load.spritesheet("bush","assets/spritesheet.png",{frameWidth:64,frameHeight:64,startFrame:184,endFrame:184}),this.load.spritesheet("flowers","assets/spritesheet.png",{frameWidth:64,frameHeight:64,startFrame:165,endFrame:165}),this.load.spritesheet("copilot","assets/copilot.png",{frameWidth:64,frameHeight:80,startFrame:0,endFrame:15})}setupCollisions(){this.physics.add.collider(this.player,this.copilot,(()=>{this.player.setImmovable(!0),this.copilot.setImmovable(!0)}))}}class n extends s.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"land"),t(this,"logo"),t(this,"title")}preload(){this.load.image("clouds","assets/clouds.png")}create(){this.background=this.add.image(0,0,"clouds").setOrigin(0,0),this.background.displayWidth=this.sys.canvas.width,this.background.displayHeight=this.sys.canvas.height,this.logo=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/3,"Cozy Copilot",{fontFamily:"Arial Black",fontSize:50,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.title=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/2+50,"Start Game",{fontFamily:"Arial Black",fontSize:30,color:"#ffcc99",stroke:"#000000",strokeThickness:5,align:"center"}).setOrigin(.5),this.title.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.startGame()))}startGame(){this.scene.start("Game")}}class l extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"clouds"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}const c={type:Phaser.AUTO,width:768,height:1024,backgroundColor:"#2d7c45",min:{width:480,height:720},max:{width:1024,height:1280},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},dom:{createContainer:!0},parent:"game-container",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:[a,l,n,o]};new s.Game(c);
